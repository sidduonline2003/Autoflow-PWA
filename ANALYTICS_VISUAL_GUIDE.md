# Analytics Dashboard - Visual Reference Guide ğŸ“Š

## Dashboard Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Back to Dashboard                              [Refresh]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ğŸ“Š Total    â”‚ â”‚  ğŸ’° Total    â”‚ â”‚  âœ… Availableâ”‚ â”‚  ğŸ“ˆ In â”‚â”‚â”‚
â”‚  â”‚  Assets      â”‚ â”‚  Value       â”‚ â”‚              â”‚ â”‚  Use   â”‚â”‚â”‚
â”‚  â”‚              â”‚ â”‚              â”‚ â”‚              â”‚ â”‚        â”‚â”‚â”‚
â”‚  â”‚     15       â”‚ â”‚  â‚¹25,00,000  â”‚ â”‚      8       â”‚ â”‚   5    â”‚â”‚â”‚
â”‚  â”‚              â”‚ â”‚              â”‚ â”‚  53% of totalâ”‚ â”‚ 33% ut â”‚â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Equipment Status Distributionâ”‚ â”‚ Equipment by Category      â”‚â”‚
â”‚  â”‚                              â”‚ â”‚                            â”‚â”‚
â”‚  â”‚       [PIE CHART]            â”‚ â”‚      [BAR CHART]           â”‚â”‚
â”‚  â”‚                              â”‚ â”‚                            â”‚â”‚
â”‚  â”‚  ğŸŸ¢ Available: 8 (53%)       â”‚ â”‚  Camera    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  5     â”‚â”‚
â”‚  â”‚  ğŸ”µ Checked Out: 5 (33%)     â”‚ â”‚  Lighting  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    3     â”‚â”‚
â”‚  â”‚  ğŸŸ¡ Maintenance: 1 (7%)      â”‚ â”‚  Audio     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  4     â”‚â”‚
â”‚  â”‚  ğŸ”´ Missing: 0 (0%)          â”‚ â”‚  Misc      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    3     â”‚â”‚
â”‚  â”‚  ğŸŸ£ Retired: 1 (7%)          â”‚ â”‚                            â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Equipment Utilization Trend (Last 30 Days)                  â”‚â”‚
â”‚  â”‚                                                             â”‚â”‚
â”‚  â”‚     [DUAL LINE CHART]                                       â”‚â”‚
â”‚  â”‚  %                                                          â”‚â”‚
â”‚  â”‚  50â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”‚â”‚
â”‚  â”‚  40â”‚        â•±â•²    â•±â•²                                        â”‚â”‚
â”‚  â”‚  30â”‚       â•±  â•²  â•±  â•²    â•±â•²                                 â”‚â”‚
â”‚  â”‚  20â”‚  â”€â”€â”€â”€â•±â”€â”€â”€â”€â•²â•±â”€â”€â”€â”€â•²â”€â”€â•±â”€â”€â•²â”€â”€â”€â”€                            â”‚â”‚
â”‚  â”‚  10â”‚                                                        â”‚â”‚
â”‚  â”‚   0â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>              â”‚â”‚
â”‚  â”‚     Oct 6    Oct 13   Oct 20   Oct 27                      â”‚â”‚
â”‚  â”‚                                                             â”‚â”‚
â”‚  â”‚  Legend: â”€â”€â”€ Utilization Rate (%)  â”€â”€â”€ Assets In Use       â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Top Crew Members by Responsibility Score                    â”‚â”‚
â”‚  â”‚                                                             â”‚â”‚
â”‚  â”‚ Rank â”‚ Name      â”‚ Checkouts â”‚ On-Time â”‚ Condition â”‚ Damagesâ”‚â”‚
â”‚  â”‚â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚â”‚
â”‚  â”‚  #1  â”‚ John Doe  â”‚    45     â”‚ 92.5% ğŸŸ¢â”‚   4/5    â”‚  1 ğŸŸ¢  â”‚â”‚
â”‚  â”‚  #2  â”‚ Jane Smithâ”‚    38     â”‚ 88.0% ğŸŸ¢â”‚   5/5    â”‚  0 ğŸŸ¢  â”‚â”‚
â”‚  â”‚  #3  â”‚ Bob Wilsonâ”‚    32     â”‚ 75.0% ğŸŸ¡â”‚   3/5    â”‚  2 ğŸŸ¡  â”‚â”‚
â”‚  â”‚  #4  â”‚ Alice Lee â”‚    28     â”‚ 82.5% ğŸŸ¢â”‚   4/5    â”‚  1 ğŸŸ¢  â”‚â”‚
â”‚  â”‚  #5  â”‚ Mike Chen â”‚    25     â”‚ 60.0% ğŸŸ¡â”‚   3/5    â”‚  3 ğŸ”´  â”‚â”‚
â”‚  â”‚                                                    Score    â”‚â”‚
â”‚  â”‚                                                     85/100  â”‚â”‚
â”‚  â”‚                                                     80/100  â”‚â”‚
â”‚  â”‚                                                     65/100  â”‚â”‚
â”‚  â”‚                                                     70/100  â”‚â”‚
â”‚  â”‚                                                     50/100  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ğŸ”§          â”‚ â”‚  ğŸ’°          â”‚ â”‚  ğŸ“                      â”‚â”‚
â”‚  â”‚  Maintenance â”‚ â”‚  Rental      â”‚ â”‚  Categories              â”‚â”‚
â”‚  â”‚              â”‚ â”‚  Revenue     â”‚ â”‚                          â”‚â”‚
â”‚  â”‚  1 items     â”‚ â”‚  â‚¹0         â”‚ â”‚  4 categories            â”‚â”‚
â”‚  â”‚  âš ï¸ Needs    â”‚ â”‚  This month  â”‚ â”‚  Across all equipment    â”‚â”‚
â”‚  â”‚  attention   â”‚ â”‚              â”‚ â”‚                          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Color Coding Guide

### Status Distribution (Pie Chart)
- ğŸŸ¢ **Green** (Available): Equipment ready for checkout
- ğŸ”µ **Blue** (Checked Out): Currently in use
- ğŸŸ¡ **Yellow** (Maintenance): Under repair/servicing
- ğŸ”´ **Red** (Missing): Lost or stolen
- ğŸŸ£ **Purple** (Retired): Out of service

### Crew Performance (Table)
- ğŸŸ¢ **Green Badge**: â‰¥80% on-time, 0-1 damage incidents
- ğŸŸ¡ **Yellow Badge**: 50-79% on-time, 1-2 damage incidents
- ğŸ”´ **Red Badge**: <50% on-time, 3+ damage incidents

### Responsibility Score Interpretation
- **90-100**: â­ Excellent - Highly reliable crew member
- **70-89**: âœ… Good - Dependable with minor issues
- **50-69**: âš ï¸ Fair - Needs improvement
- **0-49**: âŒ Poor - Requires immediate attention

---

## Interactive Features

### Charts
1. **Hover Tooltips**: 
   - Pie chart: Shows exact counts and percentages
   - Bar chart: Shows category names and counts
   - Line chart: Shows date, utilization rate, and assets in use

2. **Responsive Sizing**:
   - Charts auto-resize to container width
   - Mobile: Stacked layout (single column)
   - Tablet: 2-column grid
   - Desktop: Full 2-column layout

### Buttons
- **Back to Dashboard**: Returns to main equipment page
- **Refresh**: Reloads all analytics data

### Error States
- **Loading**: Centered spinner while fetching data
- **Error**: Red alert with error message + Retry button
- **Empty State**: "No data available" messages

---

## Data Refresh Behavior

### Automatic Caching
- **Summary data**: Cached in Firestore (`equipmentAnalytics/summary`)
- **First load**: Calculates and saves to cache
- **Subsequent loads**: Uses cached data (instant response)
- **Cache invalidation**: Manual refresh or after equipment changes

### Manual Refresh
- Click "Refresh" button
- Fetches all 3 endpoints in parallel
- Updates all visualizations simultaneously
- Shows loading spinner during refresh

---

## Mobile View Adjustments

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† Back  [â†»]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“Š Total      â”‚
â”‚     15        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ’° Value      â”‚
â”‚  â‚¹25,00,000   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… Available  â”‚
â”‚      8        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“ˆ In Use     â”‚
â”‚      5        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Status Chart  â”‚
â”‚  [PIE]        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Category Chartâ”‚
â”‚  [BAR]        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Utilization   â”‚
â”‚  [LINE]       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Crew Scores   â”‚
â”‚  [TABLE]      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Maintenance   â”‚
â”‚ Rental        â”‚
â”‚ Categories    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## API Endpoints Used

1. **`GET /api/equipment/analytics/summary`**
   - Fetches: Total assets, values, status breakdown, categories
   - Used by: Summary cards, pie chart, bar chart

2. **`GET /api/equipment/analytics/crew-scores?limit=10`**
   - Fetches: Top 10 crew members with performance metrics
   - Used by: Crew scores table

3. **`GET /api/equipment/analytics/utilization-trend?days=30`**
   - Fetches: 30-day utilization data (weekly intervals)
   - Used by: Utilization trend line chart

---

## Navigation Path

```
Admin Portal Home
    â†“
Equipment Dashboard (/equipment)
    â†“
Analytics Button â†’ Analytics Dashboard (/equipment/analytics)
```

---

## Quick Reference

### Key Metrics Explained

**Total Assets**: Count of all equipment items (any status)

**Total Value**: Sum of `bookValue` field across all equipment

**Available**: Equipment with status = `AVAILABLE`

**In Use**: Equipment with status = `CHECKED_OUT`

**Utilization Rate**: `(In Use / Total Assets) Ã— 100`

**Responsibility Score**: Weighted formula based on:
- 50% on-time return rate
- 30% equipment condition on return
- 20% damage incident penalty

**Condition Score**: 
- 5 = Excellent (90%+ good returns)
- 4 = Very Good (70-89% good returns)
- 3 = Good (50-69% good returns)
- 2 = Fair (<50% good returns)

---

## Best Practices for Admins

1. **Review Weekly**: Check utilization trends every Monday
2. **Track Top Performers**: Recognize crew members with 85+ scores
3. **Address Low Scores**: Coach crew members below 50
4. **Monitor Damages**: Investigate patterns in damage incidents
5. **Optimize Inventory**: Retire underutilized equipment
6. **Budget Planning**: Use total value for insurance/replacement planning

---

## Troubleshooting

**Dashboard not loading?**
- Check network tab: Should see 3 API calls (summary, crew-scores, utilization-trend)
- Verify 200 OK responses
- Check console for error messages

**No crew scores showing?**
- Verify there are completed checkouts with return data
- Check that users have `userName` field populated
- Ensure `actualReturnDate` is set on returned items

**Utilization trend flat line?**
- Confirm active/historical checkouts exist
- Verify `checkoutDate` and `expectedReturnDate` are set
- Check date range (default 30 days)

**403 Forbidden errors?**
- User must have `role: "admin"` in Firebase Auth custom claims
- Verify JWT token is valid and not expired

---

This visual guide complements the technical implementation document for complete reference! ğŸ¨ğŸ“Š
